#!/usr/bin/env sh
set -e

if ! command -v pnpm >/dev/null 2>&1; then
  echo "pnpm not found; skipping pre-commit checks."
  exit 0
fi

if [ ! -d node_modules ]; then
  echo "node_modules directory missing; run 'pnpm install' to enable pre-commit checks."
  exit 0
fi

pnpm typecheck
pnpm lint
pnpm test -- --run --changed
